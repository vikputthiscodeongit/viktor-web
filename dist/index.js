document.body;const isArray=thing=>Array.isArray(thing),asArray=value=>isArray(value)?value:[value],DEFAULT_STATUSES={started:!1,completed:!1,frozen:!1,destroyed:!1},index_es_DEFAULT_OPTIONS={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map((n=>({opacity:n}))),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},createElement=el=>document.createElement(el),createTextNode=content=>document.createTextNode(content),appendStyleBlock=(styles,id="")=>{let styleBlock=createElement("style");styleBlock.id=id,styleBlock.appendChild(createTextNode(styles)),document.head.appendChild(styleBlock)},calculateDelay=delayArg=>(isArray(delayArg)||(delayArg=[delayArg/2,delayArg/2]),delayArg),randomInRange=(value,range)=>Math.abs(Math.random()*(value+range-(value-range))+(value-range));let range=val=>val/2;const toArray=val=>Array.from(val);let expandTextNodes=element=>([...element.childNodes].forEach((child=>{if(child.nodeValue)return[...child.nodeValue].forEach((c=>{child.parentNode.insertBefore(createTextNode(c),child)})),void child.remove();expandTextNodes(child)})),element);const getParsedBody=content=>{let doc=document.implementation.createHTMLDocument();return doc.body.innerHTML=content,expandTextNodes(doc.body)};function walkElementNodes(element,shouldReverse=!1,shouldIncludeCursor=!1){let nextNode,cursor=element.querySelector(".ti-cursor"),walker=document.createTreeWalker(element,NodeFilter.SHOW_ALL,{acceptNode:node=>{if(cursor&&shouldIncludeCursor){if(node.classList?.contains("ti-cursor"))return NodeFilter.FILTER_ACCEPT;if(cursor.contains(node))return NodeFilter.FILTER_REJECT}return node.classList?.contains("ti-cursor")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),nodes=[];for(;nextNode=walker.nextNode();)nextNode.originalParent||(nextNode.originalParent=nextNode.parentNode),nodes.push(nextNode);return shouldReverse?nodes.reverse():nodes}const cleanUpSkipped=({index:index,newIndex:newIndex,queueItems:queueItems,cleanUp:cleanUp})=>{for(let i=index+1;i<newIndex+1;i++)cleanUp(queueItems[i][0])},isNumber=value=>Number.isInteger(value),countStepsToSelector=({queueItems:queueItems,selector:selector,cursorPosition:cursorPosition,to:to})=>{if(isNumber(selector))return-1*selector;let isMovingToEnd=new RegExp("END","i").test(to),selectorIndex=selector?[...queueItems].reverse().findIndex((({char:char})=>{let parentElement=char.parentElement,parentMatches=parentElement.matches(selector);return!(!isMovingToEnd||!parentMatches)||parentMatches&&parentElement.firstChild.isSameNode(char)})):-1;return selectorIndex<0&&(selectorIndex=isMovingToEnd?0:queueItems.length-1),selectorIndex-cursorPosition+(isMovingToEnd?0:1)},duplicate=(value,times)=>new Array(times).fill(value);let beforePaint=cb=>new Promise((resolve=>{requestAnimationFrame((async()=>{resolve(await cb())}))})),getAnimationFromElement=element=>element?.getAnimations().find((animation=>animation.id===element.dataset.tiAnimationId)),setCursorAnimation=({cursor:cursor,frames:frames,options:options})=>{let animation=cursor.animate(frames,options);return animation.pause(),animation.id=cursor.dataset.tiAnimationId,beforePaint((()=>{beforePaint((()=>{animation.play()}))})),animation},execute=queueItem=>queueItem.func?.call(null);const isInput=el=>"value"in el;let handleFunctionalArg=arg=>"function"==typeof arg?arg():arg,index_es_select=(selector,element=document,all=!1)=>element["querySelector"+(all?"All":"")](selector);const merge=(originalObj,newObj)=>Object.assign({},originalObj,newObj);let cursorFontStyles={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"};class TypeIt{element;timeouts;cursorPosition;predictedCursorPosition;statuses={started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1};opts;id;queue;cursor;flushCallback=null;unfreeze=()=>{};constructor(element,options={}){var thing;this.opts=merge(index_es_DEFAULT_OPTIONS,options),this.element="string"==typeof(thing=element)?index_es_select(thing):thing,this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=merge({},DEFAULT_STATUSES),this.id=Math.random().toString().substring(2,9),this.queue=function(initialItems){let add=function(steps){return asArray(steps).forEach((step=>_q.set(Symbol(step.char?.innerText),buildQueueItem({...step})))),this},buildQueueItem=queueItem=>(queueItem.shouldPauseCursor=function(){return Boolean(this.typeable||this.cursorable||this.deletable)},queueItem),getQueue=()=>_q,rawValues=()=>Array.from(_q.values()),_q=new Map;return add(initialItems),{add:add,set:function(index,item){let keys=[..._q.keys()];_q.set(keys[index],buildQueueItem(item))},wipe:function(){_q=new Map,add(initialItems)},done:(key,shouldDestroy=!1)=>shouldDestroy?_q.delete(key):_q.get(key).done=!0,reset:function(){_q.forEach((item=>delete item.done))},destroy:key=>_q.delete(key),getItems:(all=!1)=>all?rawValues():rawValues().filter((i=>!i.done)),getQueue:getQueue,getTypeable:()=>rawValues().filter((value=>value.typeable)),getPendingQueueItems:()=>{const pending=[];for(let[,value]of getQueue())value.done||pending.push(value);return pending}}}([{delay:this.opts.startDelay}]),this.#buildOptions(options),this.cursor=this.#setUpCursor(),this.element.dataset.typeitId=this.id,appendStyleBlock("[data-typeit-id]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}"),this.opts.strings.length&&this.#generateQueue()}go(){return this.statuses.started?this:(this.#attachCursor(),this.opts.waitUntilVisible?(element=this.element,func=this.#fire.bind(this),new IntersectionObserver(((entries,observer2)=>{entries.forEach((entry=>{entry.isIntersecting&&(func(),observer2.unobserve(element))}))}),{threshold:1}).observe(element),this):(this.#fire(),this));var element,func}destroy(shouldRemoveCursor=!0){this.timeouts=(this.timeouts.forEach(clearTimeout),[]),handleFunctionalArg(shouldRemoveCursor)&&this.cursor&&this.#removeNode(this.cursor),this.statuses.destroyed=!0}reset(rebuild){!this.is("destroyed")&&this.destroy(),rebuild?(this.queue.wipe(),rebuild(this)):this.queue.reset(),this.cursorPosition=0;for(let property in this.statuses)this.statuses[property]=!1;return this.element[this.#elementIsInput()?"value":"innerHTML"]="",this}is=function(key){return this.statuses[key]};type(string,actionOpts={}){string=handleFunctionalArg(string);let{instant:instant}=actionOpts,bookEndQueueItems=this.#generateTemporaryOptionQueueItems(actionOpts),charsAsQueueItems=function(str,asHtml=!0){return asHtml?walkElementNodes(getParsedBody(str)):toArray(str).map(createTextNode)}(string,this.opts.html).map((char=>{return{func:()=>this.#type(char),char:char,delay:instant||(el=char,/<(.+)>(.*?)<\/(.+)>/.test(el.outerHTML))?0:this.#getPace(),typeable:char.nodeType===Node.TEXT_NODE};var el})),itemsToQueue=[bookEndQueueItems[0],{func:async()=>await this.opts.beforeString(string,this)},...charsAsQueueItems,{func:async()=>await this.opts.afterString(string,this)},bookEndQueueItems[1]];return this.#queueAndReturn(itemsToQueue,actionOpts)}break(actionOpts={}){return this.#queueAndReturn({func:()=>this.#type(createElement("BR")),typeable:!0},actionOpts)}move(movementArg,actionOpts={}){movementArg=handleFunctionalArg(movementArg);let bookEndQueueItems=this.#generateTemporaryOptionQueueItems(actionOpts),{instant:instant,to:to}=actionOpts,numberOfSteps=countStepsToSelector({queueItems:this.queue.getTypeable(),selector:null===movementArg?"":movementArg,to:to,cursorPosition:this.#derivedCursorPosition}),directionalStep=numberOfSteps<0?-1:1;return this.predictedCursorPosition=this.#derivedCursorPosition+numberOfSteps,this.#queueAndReturn([bookEndQueueItems[0],...duplicate({func:()=>this.#move(directionalStep),delay:instant?0:this.#getPace(),cursorable:!0},Math.abs(numberOfSteps)),bookEndQueueItems[1]],actionOpts)}exec(func,actionOpts={}){let bookEndQueueItems=this.#generateTemporaryOptionQueueItems(actionOpts);return this.#queueAndReturn([bookEndQueueItems[0],{func:()=>func(this)},bookEndQueueItems[1]],actionOpts)}options(opts,actionOpts={}){return opts=handleFunctionalArg(opts),this.#updateOptions(opts),this.#queueAndReturn({},actionOpts)}pause(milliseconds,actionOpts={}){return this.#queueAndReturn({delay:handleFunctionalArg(milliseconds)},actionOpts)}delete(numCharacters=null,actionOpts={}){numCharacters=handleFunctionalArg(numCharacters);let bookEndQueueItems=this.#generateTemporaryOptionQueueItems(actionOpts),num=numCharacters,{instant:instant,to:to}=actionOpts,typeableQueueItems=this.queue.getTypeable(),rounds=(()=>null===num?typeableQueueItems.length:isNumber(num)?num:countStepsToSelector({queueItems:typeableQueueItems,selector:num,cursorPosition:this.#derivedCursorPosition,to:to}))();return this.#queueAndReturn([bookEndQueueItems[0],...duplicate({func:this.#delete.bind(this),delay:instant?0:this.#getPace(1),deletable:!0},rounds),bookEndQueueItems[1]],actionOpts)}freeze(){this.statuses.frozen=!0}flush(cb=null){return this.flushCallback=cb||this.flushCallback,this.statuses.firing||(this.#attachCursor(),this.#fire(!1).then((()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}))),this}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(options){return this.#updateOptions(options)}getElement(){return this.element}empty(actionOpts={}){return this.#queueAndReturn({func:this.#empty.bind(this)},actionOpts)}async#empty(){this.#elementIsInput()?this.element.value="":this.#allChars.forEach(this.#removeNode.bind(this))}async#fire(remember=!0){this.statuses.started=!0,this.statuses.firing=!0;let cleanUp=qKey=>{this.queue.done(qKey,!remember)};try{let queueItems=[...this.queue.getQueue()];for(let index=0;index<queueItems.length;index++){let[queueKey,queueItem]=queueItems[index];if(!queueItem.done){if(!queueItem.deletable||queueItem.deletable&&this.#allChars.length){let newIndex=await this.#fireItemWithContext(index,queueItems);cleanUpSkipped({index:index,newIndex:newIndex,queueItems:queueItems,cleanUp:cleanUp}),index=newIndex}cleanUp(queueKey)}}if(!remember)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,await this.opts.afterComplete(this),!this.opts.loop)throw"";let delay=this.opts.loopDelay;this.#wait((async()=>{await this.#prepLoop(delay[0]),this.#fire()}),delay[1])}catch(e){}return this.statuses.firing=!1,this}async#move(step){var steps,cursorPosition,printedCharacters;this.cursorPosition=(steps=step,cursorPosition=this.cursorPosition,printedCharacters=this.#allChars,Math.min(Math.max(cursorPosition+steps,0),printedCharacters.length)),(element=>{let nodeToInsertBefore=this.#allChars[this.cursorPosition-1],cursor=index_es_select(".ti-cursor",element);(element=nodeToInsertBefore?.parentNode||element).insertBefore(cursor,nodeToInsertBefore||null)})(this.element)}async#prepLoop(delay){let derivedCursorPosition=this.#derivedCursorPosition;derivedCursorPosition&&await this.#move({value:derivedCursorPosition});let queueItems=this.#allChars.map((c=>[Symbol(),{func:this.#delete.bind(this),delay:this.#getPace(1),deletable:!0,shouldPauseCursor:()=>!0}]));for(let index=0;index<queueItems.length;index++)await this.#fireItemWithContext(index,queueItems);this.queue.reset(),this.queue.set(0,{delay:delay})}#fireItemWithContext(index,queueItems){return(async({index:index,queueItems:queueItems,wait:wait,cursor:cursor,cursorOptions:cursorOptions})=>{let queueItem=queueItems[index][1],instantQueue=[],tempIndex=index,futureItem=queueItem,shouldBeGrouped=()=>futureItem&&!futureItem.delay,shouldPauseCursor=queueItem.shouldPauseCursor()&&cursorOptions.autoPause;for(;shouldBeGrouped();)instantQueue.push(futureItem),shouldBeGrouped()&&tempIndex++,futureItem=queueItems[tempIndex]?queueItems[tempIndex][1]:null;if(instantQueue.length)return await beforePaint((async()=>{for(let q of instantQueue)await execute(q)})),tempIndex-1;let options,animation=getAnimationFromElement(cursor);return animation&&(options={...animation.effect.getComputedTiming(),delay:shouldPauseCursor?cursorOptions.autoPauseDelay:0}),await wait((async()=>{animation&&shouldPauseCursor&&animation.cancel(),await beforePaint((()=>{execute(queueItem)}))}),queueItem.delay),await(({cursor:cursor,options:options,cursorOptions:cursorOptions})=>{if(!cursor||!cursorOptions)return;let oldCurrentTime,animation=getAnimationFromElement(cursor);animation&&(options.delay=animation.effect.getComputedTiming().delay,oldCurrentTime=animation.currentTime,animation.cancel());let newAnimation=setCursorAnimation({cursor:cursor,frames:cursorOptions.animation.frames,options:options});return oldCurrentTime&&(newAnimation.currentTime=oldCurrentTime),newAnimation})({cursor:cursor,options:options,cursorOptions:cursorOptions}),index})({index:index,queueItems:queueItems,wait:this.#wait.bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})}async#wait(callback,delay,silent=!1){this.statuses.frozen&&await new Promise((resolve=>{this.unfreeze=()=>{this.statuses.frozen=!1,resolve()}})),silent||await this.opts.beforeStep(this),await((callback,delay,timeouts)=>new Promise((resolve=>{timeouts.push(setTimeout((async()=>{await callback(),resolve()}),delay||0))})))(callback,delay,this.timeouts),silent||await this.opts.afterStep(this)}async#attachCursor(){if(!this.#elementIsInput()&&this.cursor&&this.element.appendChild(this.cursor),this.#shouldRenderCursor){((id,element)=>{let cursorSelector=`[data-typeit-id='${id}'] .ti-cursor`,computedStyles=getComputedStyle(element),customProperties=Object.entries(cursorFontStyles).reduce(((accumulator,[item,value])=>`${accumulator} ${item}: var(--ti-cursor-${item}, ${value||computedStyles[item]});`),"");appendStyleBlock(`${cursorSelector} { display: inline-block; width: 0; ${customProperties} }`,id)})(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:animation}=this.opts.cursor,{frames:frames,options:options}=animation;setCursorAnimation({frames:frames,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...options}})}}#elementIsInput(){return isInput(this.element)}#queueAndReturn(steps,opts){return this.queue.add(steps),this.#maybeAppendPause(opts),this}#maybeAppendPause(opts={}){let delay=opts.delay;delay&&this.queue.add({delay:delay})}#generateTemporaryOptionQueueItems(newOptions={}){return[{func:()=>this.#updateOptions(newOptions)},{func:()=>this.#updateOptions(this.opts)}]}async#updateOptions(opts){this.opts=merge(this.opts,opts)}#generateQueue(){let strings=this.opts.strings.filter((string=>!!string));strings.forEach(((string,index)=>{if(this.type(string),index+1===strings.length)return;let splitItems=this.opts.breakLines?[{func:()=>this.#type(createElement("BR")),typeable:!0}]:duplicate({func:this.#delete.bind(this),delay:this.#getPace(1)},this.queue.getTypeable().length);this.#addSplitPause(splitItems)}))}#buildOptions=options=>{this.opts.cursor=(cursorOptions=>{if("object"==typeof cursorOptions){let newOptions={},{frames:defaultFrames,options:defaultOptions}=index_es_DEFAULT_OPTIONS.cursor.animation;return newOptions.animation=cursorOptions.animation||{},newOptions.animation.frames=cursorOptions.animation?.frames||defaultFrames,newOptions.animation.options=merge(defaultOptions,cursorOptions.animation?.options||{}),newOptions.autoPause=cursorOptions.autoPause??index_es_DEFAULT_OPTIONS.cursor.autoPause,newOptions.autoPauseDelay=cursorOptions.autoPauseDelay||index_es_DEFAULT_OPTIONS.cursor.autoPauseDelay,newOptions}return!0===cursorOptions?index_es_DEFAULT_OPTIONS.cursor:cursorOptions})(options.cursor??index_es_DEFAULT_OPTIONS.cursor),this.opts.strings=this.#prependHardcodedStrings(asArray(this.opts.strings)),this.opts=merge(this.opts,{html:!this.#isInput&&this.opts.html,nextStringDelay:calculateDelay(this.opts.nextStringDelay),loopDelay:calculateDelay(this.opts.loopDelay)})};#prependHardcodedStrings(strings){let existingMarkup=this.element.innerHTML;return existingMarkup?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=existingMarkup,expandTextNodes(this.element),this.#addSplitPause(duplicate({func:this.#delete.bind(this),delay:this.#getPace(1),deletable:!0},this.#allChars.length)),strings):(str=existingMarkup,str.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)).concat(strings)):strings;var str}#setUpCursor(){if(this.#isInput)return null;let cursor=createElement("span");return cursor.className="ti-cursor",this.#shouldRenderCursor?(cursor.innerHTML=getParsedBody(this.opts.cursorChar).innerHTML,cursor):(cursor.style.visibility="hidden",cursor)}#addSplitPause(items){let delay=this.opts.nextStringDelay;this.queue.add([{delay:delay[0]},...items,{delay:delay[1]}])}#type(char){((originalTarget,character)=>{if(isInput(originalTarget))return void(originalTarget.value=`${originalTarget.value}${character.textContent}`);character.innerHTML="";let target=(node=character.originalParent,/body/i.test(node?.tagName)?originalTarget:character.originalParent||originalTarget);var node;let cursorNode=index_es_select(".ti-cursor",target)||null;cursorNode&&cursorNode.parentElement!==target&&(target=cursorNode.parentElement),target.insertBefore(character,cursorNode)})(this.element,char)}#delete(){this.#allChars.length&&(this.#isInput?this.element.value=this.element.value.slice(0,-1):this.#removeNode(this.#allChars[this.cursorPosition]))}#removeNode(node){((node,rootElement)=>{if(!node)return;let nodeParent=node.parentNode;(nodeParent.childNodes.length>1||nodeParent.isSameNode(rootElement)?node:nodeParent).remove()})(node,this.element)}#getPace(index=0){return function(options){let{speed:speed,deleteSpeed:deleteSpeed,lifeLike:lifeLike}=options;return deleteSpeed=null!==deleteSpeed?deleteSpeed:speed/3,lifeLike?[randomInRange(speed,range(speed)),randomInRange(deleteSpeed,range(deleteSpeed))]:[speed,deleteSpeed]}(this.opts)[index]}get#derivedCursorPosition(){return this.predictedCursorPosition??this.cursorPosition}get#isInput(){return isInput(this.element)}get#shouldRenderCursor(){return!!this.opts.cursor&&!this.#isInput}get#allChars(){return element=this.element,isInput(element)?toArray(element.value):walkElementNodes(element,!0).filter((c=>!(c.childNodes.length>0)));var element}}function createEl(tagName,attrs){if("string"!=typeof tagName)throw new Error("`tagName` must be a `string`.");if(attrs&&"object"!=typeof attrs)throw new Error("`attrs` must be an `object`.");const el=document.createElement(tagName);if(attrs)for(const[prop,rawVal]of Object.entries(attrs)){if("string"!=typeof rawVal&&"number"!=typeof rawVal&&"boolean"!=typeof rawVal||!1===rawVal||null===rawVal)continue;const val=rawVal.toString();if("textContent"===prop){el.textContent=val;continue}const propKebab=prop.replace(/[A-Z]/g,(letter=>"-"+letter.toLowerCase()));el.setAttribute(propKebab,val)}return el}async function fetchWithTimeout(resource,fetchOptions,timeoutDuration){if(timeoutDuration&&"number"!=typeof timeoutDuration)throw new Error("`timeoutDuration` must be a `number`.");const options=fetchOptions||{},ac=new AbortController;options.signal=ac.signal;const timeoutId=setTimeout((()=>ac.abort()),void 0===timeoutDuration?8e3:timeoutDuration<0?0:timeoutDuration),response=await fetch(resource,options);return clearTimeout(timeoutId),response}function dist_createEl(tagName,attrs){if("string"!=typeof tagName)throw new Error("`tagName` must be a `string`.");if(attrs&&"object"!=typeof attrs)throw new Error("`attrs` must be an `object`.");const el=document.createElement(tagName);if(attrs)for(const[prop,rawVal]of Object.entries(attrs)){if("string"!=typeof rawVal&&"number"!=typeof rawVal&&"boolean"!=typeof rawVal||!1===rawVal||null===rawVal)continue;const val=rawVal.toString();if("textContent"===prop){el.textContent=val;continue}const propKebab=prop.replace(/[A-Z]/g,(letter=>"-"+letter.toLowerCase()));el.setAttribute(propKebab,val)}return el}var NotificationState;!function(NotificationState){NotificationState.HIDE_BUSY="HIDE_BUSY",NotificationState.SHOW_BUSY="SHOW_BUSY",NotificationState.SHOWN="SHOWN",NotificationState.WAITING_ON_HIDE="WAITING_ON_HIDE"}(NotificationState||(NotificationState={}));const makeInstanceId=(min,max,excludeIds,tryCount)=>{tryCount=tryCount||1;const id=function(min,max){if("number"!=typeof min||"number"!=typeof max)throw new Error("`min` and `max` must both be `number`s.");if(min<0||max<0||max<min)throw new Error("`min` and `max` must both be 0 or greater and `max` must be greater than `min`.");return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min)+min)}(min,max);if(excludeIds.includes(id)){if(tryCount>3)throw new Error("Failed to generate a unique instanceId 3 times!");makeInstanceId(min,max,excludeIds,++tryCount)}return id},DEFAULT_INSTANCE_OPTIONS={parentEl:document.body,position:["top","center"],hideAfterTime:4e3,hideOlder:!1,dismissable:!1,classNames:[]};class SN{hideAfterTime;hideOlder;dismissable;notifierEl;notifications;currentNotificationId;queuedNotifications;instanceId;constructor(options={}){const mergedOptions={...DEFAULT_INSTANCE_OPTIONS,...options};this.hideAfterTime=mergedOptions.hideAfterTime,this.hideOlder=mergedOptions.hideOlder,this.dismissable=mergedOptions.dismissable,this.notifierEl=dist_createEl("div",{class:`simple-notifier simple-notifier--position-x-${mergedOptions.position[1]} simple-notifier--position-y-${mergedOptions.position[0]}`,ariaLive:"assertive"}),this.notifierEl.classList.add(...mergedOptions.classNames),this.notifications=new Map,this.currentNotificationId=0,this.queuedNotifications=[],this.instanceId=makeInstanceId(1e5,1e6,SN.#instanceIds),SN.#instanceIds.push(this.instanceId),mergedOptions.parentEl.insertBefore(this.notifierEl,mergedOptions.parentEl.firstElementChild)}static#instanceIds=[];get notificationIds(){return[...this.notifications.keys()]}#getNotificationOptions(textOrOptions,variant){const notificationOptions="object"!=typeof textOrOptions||Array.isArray(textOrOptions)?void 0:textOrOptions,notificationText=notificationOptions?notificationOptions.text:textOrOptions;return{hideAfterTime:notificationOptions?.hideAfterTime??this.hideAfterTime,hideOlder:notificationOptions?.hideOlder??this.hideOlder,dismissable:notificationOptions?.dismissable??this.dismissable,text:"string"==typeof notificationText&&""!==notificationText?[notificationText]:notificationText||null,title:notificationOptions?.title||null,titleLevel:notificationOptions?.titleLevel??"h6",variant:notificationOptions?.variant??variant??"default"}}#makeNotificationEl(id,options){const notificationEl=dist_createEl("div",{class:`simple-notification simple-notification--${options.variant} simple-notification--animation-in`,role:"alert",dataNotificationId:id.toString()}),contentEl=dist_createEl("div",{class:"simple-notification__part simple-notification__part--main"});if(options.title){const titleEl=dist_createEl(options.titleLevel,{class:"simple-notification__title",textContent:options.title});contentEl.append(titleEl)}if(options.text&&options.text.forEach((line=>{const textEl=dist_createEl("p",{class:"simple-notification__text",textContent:line});contentEl.append(textEl)})),notificationEl.append(contentEl),options.dismissable){const sideContentEl=dist_createEl("div",{class:"simple-notification__part simple-notification__part--side"}),hideButtonEl=dist_createEl("button",{type:"button",class:"simple-notification__hide-button",ariaLabel:"Dismiss notification"});hideButtonEl.addEventListener("click",(()=>this.hide(id)),{once:!0}),sideContentEl.append(hideButtonEl),notificationEl.append(sideContentEl)}return notificationEl}#processQueuedNotifications(){if(0===this.queuedNotifications.length)return;const queueCopyReversed=[...this.queuedNotifications].reverse();this.queuedNotifications=[];let notificationsToShowReversed=[],count=0;for(const notificationOptions of queueCopyReversed)if(count++,notificationOptions.hideOlder){notificationsToShowReversed=queueCopyReversed.slice(0,count);break}notificationsToShowReversed.reverse().forEach((notificationOptions=>{this.show(notificationOptions)}))}show(textOrOptions,variant){const userOptions="object"==typeof textOrOptions&&!Array.isArray(textOrOptions);if(void 0===textOrOptions||userOptions&&void 0===textOrOptions.text&&void 0===textOrOptions.title)return void console.warn("`text` or `title` must be defined. `text` may be provided as `string` or `string[]` or via an `object` as `text` value.");if(void 0!==variant&&"string"!=typeof variant)return void console.warn("`variant` must be a `string`.");const hideOlder=(userOptions&&textOrOptions.hideOlder)??this.hideOlder;if(hideOlder&&this.notifications.size>0||this.queuedNotifications.length>0){const notificationOptions=userOptions?{...textOrOptions,hideOlder:hideOlder}:{text:textOrOptions,variant:variant,hideOlder:hideOlder};return this.queuedNotifications.push(notificationOptions),this.hideAll(),void this.notifierEl.addEventListener("allhidden",(()=>this.#processQueuedNotifications()),{once:!0})}const currentNotificationId=this.currentNotificationId;this.currentNotificationId++;const notificationOptions=this.#getNotificationOptions(textOrOptions,variant),notificationEl=this.#makeNotificationEl(currentNotificationId,notificationOptions),notificationProps={...notificationOptions,state:NotificationState.SHOW_BUSY,el:notificationEl,abortController:new AbortController};this.notifications.set(currentNotificationId,notificationProps),this.notifierEl.append(notificationEl),notificationEl.addEventListener("animationend",(()=>{notificationProps.state=NotificationState.SHOWN;const notificationShownEvent=new CustomEvent("shown",{detail:{instanceId:this.instanceId,notificationId:currentNotificationId}});this.notifierEl.dispatchEvent(notificationShownEvent),notificationOptions.hideAfterTime>0&&(notificationProps.state=NotificationState.WAITING_ON_HIDE,function(duration,resolveValue,abortSignal){if("number"!=typeof duration)throw new Error("`time` must be a `number`.");return new Promise(((resolve,reject)=>{const listener=()=>{clearTimeout(timer),reject(null==abortSignal?void 0:abortSignal.reason)};null==abortSignal||abortSignal.throwIfAborted();const timer=setTimeout((()=>{null==abortSignal||abortSignal.removeEventListener("abort",listener),resolve(!0)}),duration>=0?duration:0);null==abortSignal||abortSignal.addEventListener("abort",listener)}))}(notificationProps.hideAfterTime,0,notificationProps.abortController.signal).then((()=>this.hide(currentNotificationId))).catch((abortReason=>{})))}),{once:!0,signal:notificationProps.abortController.signal})}hide(notificationId){if("number"!=typeof notificationId)return void console.warn("`notificationId` must be a `number`.");const notificationProps=this.notifications.get(notificationId);notificationProps?notificationProps.state!==NotificationState.HIDE_BUSY?(notificationProps.state!==NotificationState.SHOW_BUSY&&notificationProps.state!==NotificationState.WAITING_ON_HIDE||notificationProps.abortController.abort(`Scheduled hide or active show action of notification ${notificationId} aborted.`),notificationProps.state=NotificationState.HIDE_BUSY,notificationProps.el.classList.remove("simple-notification--animation-in"),notificationProps.el.classList.add("simple-notification--animation-out"),notificationProps.el.addEventListener("animationend",(()=>{notificationProps.el.remove(),this.notifications.delete(notificationId);const notificationHiddenEvent=new CustomEvent("hidden",{detail:{instanceId:this.instanceId,notificationId:notificationId}});if(this.notifierEl.dispatchEvent(notificationHiddenEvent),0===this.notifications.size){const allNotificationsHiddenEvent=new CustomEvent("allhidden",{detail:{instanceId:this.instanceId}});this.notifierEl.dispatchEvent(allNotificationsHiddenEvent)}}),{once:!0})):console.warn(`Already hiding notification ${notificationId}.`):console.warn(`Notification ${notificationId} doesn't exist.`)}hideAll(){const notificationIdsToHide=[];for(const[id,props]of this.notifications.entries())props.state!==NotificationState.HIDE_BUSY&&notificationIdsToHide.push(id);0!==notificationIdsToHide.length&&notificationIdsToHide.forEach((notificationId=>this.hide(notificationId)))}}function wait_wait(duration,resolveValue,abortSignal){if("number"!=typeof duration)throw new Error("`time` must be a `number`.");return new Promise(((resolve,reject)=>{const listener=()=>{clearTimeout(timer),reject(null==abortSignal?void 0:abortSignal.reason)};null==abortSignal||abortSignal.throwIfAborted();const timer=setTimeout((()=>{null==abortSignal||abortSignal.removeEventListener("abort",listener),resolve(resolveValue)}),duration>=0?duration:0);null==abortSignal||abortSignal.addEventListener("abort",listener)}))}function getAverage(numbers,round){if(!Array.isArray(numbers)||0===numbers.length)throw new Error("`numbers` must be a non-empty array.");if(round&&"string"!=typeof round)throw new Error("`round` value is invalid.");const average=numbers.reduce(((prev,cur)=>prev+cur),0)/numbers.length;if(Number.isNaN(average))throw new Error("Each item in `numbers` must be a `number`.");switch(round){case"floor":return Math.floor(average);case"ceil":return Math.ceil(average);default:return average}}function convertUnixTimeFormatToMs(time){if("number"!=typeof time||Number.isNaN(time))return console.warn("`time` must be of type `number` and not NaN."),null;const timeString=time.toString().replace(".",""),processedTimeString=timeString.length>16?timeString.slice(0,16):timeString.padEnd(16,"0");return Math.round(Number.parseInt(processedTimeString)/1e3)}function filterOutliers(values){return values.length<5?values:values.sort(((a,b)=>a-b)).slice(1,values.length-2)}const dist_DEFAULT_INSTANCE_OPTIONS={maxSyncAttempts:6,requiredOkSyncAttempts:4};class Ntp{constructor(options){const mergedOptions={...dist_DEFAULT_INSTANCE_OPTIONS,...options};this.t1EndpointUrl=mergedOptions.t1EndpointUrl,this.t1CalcFn=mergedOptions.t1CalcFn,this.t2CalcFn=mergedOptions.t2CalcFn||null,this.maxSyncAttempts=mergedOptions.maxSyncAttempts,this.requiredOkSyncAttempts=mergedOptions.requiredOkSyncAttempts}async generateData(){try{const t0=(new Date).valueOf(),response=await fetchWithTimeout(this.t1EndpointUrl);if(!response.ok)throw new Error(`t1 data fetch failed with HTTP status code ${response.status}.`);const t1=await this.t1CalcFn(response);if(null===t1)throw new Error("t1 calculation returned `null`.");let t2=t1;if(this.t2CalcFn){const t2CalcFnResult=this.t2CalcFn(response.headers);null!==t2CalcFnResult&&t2CalcFnResult>t1&&(t2=t2CalcFnResult)}const t3=(new Date).valueOf();if([t0,t1,t2,t3].some((time=>Number.isNaN(time))))throw new Error("Some of the generated time values aren't of type `number`.");return{roundTripDelay:t3-t0-(t2-t1),clientOffset:(t1-t0+(t2-t3))/2}}catch(error){throw error instanceof Error?error:new Error("Unknown error during NTP data generation!")}}async sync(){try{const data=[];for(let iteration=0,okIterations=0;iteration<this.maxSyncAttempts;iteration++)try{iteration>this.requiredOkSyncAttempts&&await wait_wait(1e3);const ntpData=await this.generateData();if(data.push(ntpData),okIterations++,okIterations>this.requiredOkSyncAttempts)break}catch(error){console.error(error),this.maxSyncAttempts}if(data.length<this.requiredOkSyncAttempts)throw new Error(`Didn't meet the required amount of ${this.requiredOkSyncAttempts} successful sync attempts within the allowed amount of ${this.maxSyncAttempts} total.`);const roundTripDelay=getAverage(filterOutliers(data.map((item=>item.roundTripDelay))),"floor"),clientOffset=getAverage(filterOutliers(data.map((item=>item.clientOffset))),"floor");return{roundTripDelay:roundTripDelay,clientOffset:clientOffset,correctedDate:(new Date).valueOf()-clientOffset}}catch(error){throw error instanceof Error?error:new Error("Unknown error during NTP sync!")}}}var _SimpleMathsCaptcha_instances,_SimpleMathsCaptcha_makeProblemData;const simple_maths_captcha_dist_DEFAULT_INSTANCE_OPTIONS={baseId:"simple-maths-captcha"};_SimpleMathsCaptcha_instances=new WeakSet,_SimpleMathsCaptcha_makeProblemData=async function(){try{const ntpValues=await this.ntp.sync();if(!ntpValues)throw new Error("NTP values fetch failed.");const response=await fetchWithTimeout(this.generatorEndpointUrl);if(!response.ok)throw new Error(`Problem fetch failed with HTTP status code ${response.status}.`);const fetchedData=await response.json(),[digit1,digit2,invalidAfterTime]=fetchedData.problem_data;return[digit1,digit2,Math.ceil(Math.max(invalidAfterTime-ntpValues.correctedDate,0))]}catch(error){throw error instanceof Error?error:new Error("Unknown error during problem fetch!")}};var dist=class{constructor(options){_SimpleMathsCaptcha_instances.add(this);try{const mergedOptions={...simple_maths_captcha_dist_DEFAULT_INSTANCE_OPTIONS,...options};this.activatorButtonEl=mergedOptions.activatorButtonEl,this.activatorButtonEl.setCustomValidity("required");const fieldEl=this.activatorButtonEl.parentElement,formEl=this.activatorButtonEl.closest("form");if(!fieldEl||!formEl)throw new Error(fieldEl?"Input must be a <form> child.":"Input must have a parent element.");this.generatorEndpointUrl=mergedOptions.generatorEndpointUrl,this.ntp=new Ntp(mergedOptions.ntpOptions),this.baseId=mergedOptions.baseId,this.activatorButtonElDefaultProps=[];for(const attr of Array.from(this.activatorButtonEl.attributes))this.activatorButtonElDefaultProps.push(attr.name);this.formEl=formEl,this.fieldEl=fieldEl;const answerInputElProps={type:"text",id:this.baseId+"-answer",name:this.baseId+"-answer",inputmode:"numeric",minlength:"1",required:"true"};return this.answerInputElDefaultProps=Object.keys(answerInputElProps),this.answerInputEl=createEl("input",answerInputElProps),this.labelEl=createEl("label",{for:this.answerInputEl.id}),this.digit1InputEl=createEl("input",{type:"hidden",id:this.baseId+"-digit-1",name:this.baseId+"-digit-1"}),this.digit2InputEl=createEl("input",{type:"hidden",id:this.baseId+"-digit-2",name:this.baseId+"-digit-2"}),this.expiryTimerEl=createEl("span"),this.loaderEl=createEl("div",{class:"spinner spinner--lg"}),this.active=!1,this.expiryTimer=void 0,this.expiryTimerAbortController=void 0,this.activatorButtonEl.addEventListener("click",(()=>{(async()=>await this.activate())().catch((error=>{console.error(error),this.deactivate()}))})),void(mergedOptions.answerInputElEventHandlers&&mergedOptions.answerInputElEventHandlers.forEach((handler=>{this.answerInputEl.addEventListener(handler.type,handler.listener,handler.options)})))}catch(error){throw error instanceof Error?error:new Error("Unknown error during initialization!")}}isCaptchaInputEl(id){return id===this.answerInputEl.id||id===this.digit1InputEl.id||id===this.digit2InputEl.id}async activate(){if(this.active);else{this.active=!0,this.expiryTimerAbortController=new AbortController;try{this.activatorButtonEl.remove(),this.labelEl.textContent="Loading CAPTCHA",this.fieldEl.prepend(this.labelEl,this.loaderEl),this.answerInputEl.value="";for(const attr of Array.from(this.answerInputEl.attributes))this.answerInputElDefaultProps.includes(attr.name)||this.answerInputEl.removeAttribute(attr.name);const[digit1,digit2,expiryTime]=await function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)}(this,_SimpleMathsCaptcha_instances,"m",_SimpleMathsCaptcha_makeProblemData).call(this);this.labelEl.textContent=`${digit1} + ${digit2} =`,this.digit1InputEl.value=digit1.toString(),this.digit2InputEl.value=digit2.toString(),this.labelEl.after(this.answerInputEl,this.digit1InputEl,this.digit2InputEl),this.loaderEl.remove();let expiryTimeSec=Math.round(expiryTime/1e3);return this.expiryTimer=setInterval((()=>{expiryTimeSec-=1,expiryTimeSec<6&&(this.expiryTimerEl.textContent=`Expires in ${expiryTimeSec} s`,document.body.contains(this.expiryTimerEl)||this.answerInputEl.after(this.expiryTimerEl))}),1e3),void await wait_wait(expiryTime,!0,this.expiryTimerAbortController.signal).then((()=>{clearInterval(this.expiryTimer),this.deactivate()})).catch((abortReason=>{}))}catch(error){throw error instanceof Error?error:new Error("Unknown error during CAPTCHA activation!")}}}deactivate(){if(this.active){clearInterval(this.expiryTimer),this.expiryTimerAbortController&&this.expiryTimerAbortController.abort("Scheduled deactivation aborted."),this.labelEl.remove(),this.answerInputEl.remove(),this.digit1InputEl.remove(),this.digit2InputEl.remove(),this.expiryTimerEl.remove(),this.loaderEl.remove();for(const attr of Array.from(this.activatorButtonEl.attributes))this.activatorButtonElDefaultProps.includes(attr.name)||this.activatorButtonEl.removeAttribute(attr.name);this.fieldEl.prepend(this.activatorButtonEl),this.active=!1}}};const FormControlValidationMessage={default:"Input invalid",email:"Email address invalid",maxlength:"Input must be shorter than %d characters",minlength:"Input must contain more than %d characters",pattern:"Input format invalid",requiredEmpty:"Input required"},NotificationContent_sumbitSuccess={title:"Message sent",text:"I'll be in touch soon!",variant:"success"},NotificationContent_submitErrorValidationFailed={text:"One or more fields failed validation. Please check and correct them.",variant:"warning"},NotificationContent_submitErrorUnknown={text:"Failed to send message. Please try again at a later time.",variant:"error"},NotificationContent_msgPushedToStorage={text:"Your message has been stored on your device. You may close this page and come back at a later time to retry sending it.",variant:"info",hideAfterTime:8e3},NotificationContent_msgRemovedFromStorage={text:"Message removed from storage.",variant:"info"};function updateFieldMessage(el){if(!el.parentElement)return;const messageEl=el.parentElement.querySelector(".field__message");messageEl&&(messageEl.textContent=function(el){if(!0===el.validity.valid)return null;if(el.validity.valueMissing)return FormControlValidationMessage.requiredEmpty;if(el.validity.patternMismatch||el.validity.typeMismatch)return"email"===el.type?FormControlValidationMessage.email:FormControlValidationMessage.pattern;if(el.validity.tooLong){const maxLength=el.getAttribute("maxlength");return FormControlValidationMessage.maxlength.replace("%d",maxLength||"the current amount of")}if(el.validity.tooShort){const minLength=el.getAttribute("minlength");return FormControlValidationMessage.minlength.replace("%d",minLength||"the current amount of")}return FormControlValidationMessage.default}(el))}function initContactForm(formEl){try{const submitButtonEl=formEl.querySelector("[type=submit]");if(!submitButtonEl)throw new Error("submitButtonEl not found!");const mathsCaptchaActivatorButtonEl=formEl.querySelector(`#${formEl.id}-simple-maths-captcha-activator`);if(!mathsCaptchaActivatorButtonEl)throw new Error("mathsCaptchaActivatorButtonEl not found!");const notifier=new SN({hideOlder:!0}),mathsCaptcha=new dist({activatorButtonEl:mathsCaptchaActivatorButtonEl,baseId:`${formEl.id}-simple-maths-captcha`,generatorEndpointUrl:"./api/simple-maths-captcha/generate-problem.php",answerInputElEventHandlers:[{type:"input",listener:()=>{mathsCaptcha.answerInputEl.setAttribute("data-had-interaction","true"),mathsCaptcha.answerInputEl.value.length>=mathsCaptcha.answerInputEl.minLength&&mathsCaptcha.answerInputEl.setCustomValidity(""),"true"===mathsCaptcha.answerInputEl.getAttribute("data-show-validation")&&(updateFieldMessage(mathsCaptcha.answerInputEl),mathsCaptcha.answerInputEl.setAttribute("data-show-validation-border",mathsCaptcha.answerInputEl.validity.valid?"neutral":"invalid"))}},{type:"blur",listener:()=>{mathsCaptcha.answerInputEl.hasAttribute("data-had-interaction")&&mathsCaptcha.answerInputEl.setAttribute("data-show-validation","true"),"true"===mathsCaptcha.answerInputEl.getAttribute("data-show-validation")&&(updateFieldMessage(mathsCaptcha.answerInputEl),mathsCaptcha.answerInputEl.setAttribute("data-show-validation-border",mathsCaptcha.answerInputEl.validity.valid?"neutral":"invalid"))}}],ntpOptions:{t1EndpointUrl:"./api/ntp/get-server-time.php",t1CalcFn:async function(response){return convertUnixTimeFormatToMs((await response.json()).req_received_time)},t2CalcFn:function(resHeaders){const header=resHeaders.get("Response-Timing");if(!header)return null;const reqReceivedTime=/\bt=([0-9]+)\b/.exec(header),reqProcessingTime=/\bD=([0-9]+)\b/.exec(header);return reqReceivedTime&&reqProcessingTime?convertUnixTimeFormatToMs(Number.parseInt(reqReceivedTime[1])+Number.parseInt(reqProcessingTime[1])):null}}}),storedFormData=localStorage.getItem(`${formEl.id}-data`);return storedFormData&&function(formDataFromLocalStorage,formEl,notifier){const fieldsetEl=createEl("fieldset"),fieldEl=createEl("div",{class:"field"}),legendEl=createEl("legend",{textContent:"A previously unsent message was stored."}),buttonContainerEl=createEl("div",{class:"item-grid"}),loadButtonEl=createEl("button",{type:"button",class:"btn btn--sm",textContent:"Load"});loadButtonEl.addEventListener("click",(()=>{!function(formDataFromLocalStorage,formEl){try{const formControlElsWithoutButtons=formEl.querySelectorAll("input:not([type=button], [type=reset], [type=submit]), textarea"),formData=JSON.parse(formDataFromLocalStorage),formControlElsWithFormData=Object.keys(formData);return void formControlElsWithoutButtons.forEach((el=>{formControlElsWithFormData.includes(el.id)&&(el.value=formData[el.id],updateFieldMessage(el),el.setAttribute("data-show-validation","true"),el.setAttribute("data-show-validation-border",el.validity.valid?"valid":"invalid"))}))}catch(error){throw error instanceof Error?error:new Error("Unknown error retrieving stored form data!")}}(formDataFromLocalStorage,formEl),fieldsetEl.remove()}),{once:!0}),buttonContainerEl.append(loadButtonEl);const clearButtonEl=createEl("button",{type:"button",class:"btn btn--sm",textContent:"Remove"});clearButtonEl.addEventListener("click",(()=>{localStorage.removeItem(`${formEl.id}-data`),fieldsetEl.remove(),notifier.show(NotificationContent_msgRemovedFromStorage)}),{once:!0}),buttonContainerEl.append(clearButtonEl),fieldEl.append(legendEl,buttonContainerEl),fieldsetEl.append(fieldEl),formEl.insertBefore(fieldsetEl,formEl.firstElementChild)}(storedFormData,formEl,notifier),formEl.querySelectorAll("input:not([type=button], [type=hidden], [type=reset], [type=submit]), textarea").forEach((el=>{el.addEventListener("input",(()=>{el.setAttribute("data-had-interaction","true")}),{once:!0}),el.addEventListener("input",(()=>{"true"===el.getAttribute("data-show-validation")&&(updateFieldMessage(el),el.setAttribute("data-show-validation-border",el.validity.valid?"valid":"invalid"))})),el.addEventListener("blur",(()=>{el.hasAttribute("data-had-interaction")&&el.setAttribute("data-show-validation","true"),"true"===el.getAttribute("data-show-validation")&&(updateFieldMessage(el),el.setAttribute("data-show-validation-border",el.validity.valid?"valid":"invalid"))}))})),submitButtonEl.addEventListener("click",(e=>{e.preventDefault(),async function(formEl,mathsCaptcha,notifier){let submitSuccessful=!1;const formFieldsets=formEl.querySelectorAll("fieldset");try{formFieldsets.forEach((el=>{el.setAttribute("disabled","true")}));const formControlElsWithoutButtons=formEl.querySelectorAll("input:not([type=button], [type=reset], [type=submit]), textarea"),formData=new FormData;formControlElsWithoutButtons.forEach((el=>{formData.set(el.name,el.value)}));const submitResponse=await fetchWithTimeout("./api/contact-form/submit-form.php",{method:"POST",body:formData});if(!submitResponse.ok){if(422===submitResponse.status){const responseData=await submitResponse.json();let invalidCaptchaEl=null;for(const el of[mathsCaptcha.activatorButtonEl,mathsCaptcha.answerInputEl]){if(invalidCaptchaEl)break;responseData.invalid_form_controls.find((control=>control.id===el.id))&&(invalidCaptchaEl=el)}invalidCaptchaEl?(mathsCaptcha.answerInputEl.setCustomValidity("required"),invalidCaptchaEl.id===mathsCaptcha.activatorButtonEl.id&&(updateFieldMessage(mathsCaptcha.activatorButtonEl),mathsCaptcha.activatorButtonEl.setAttribute("data-show-validation","true"))):mathsCaptcha.answerInputEl.setCustomValidity(""),notifier.show(NotificationContent_submitErrorValidationFailed)}else{mathsCaptcha.answerInputEl.setCustomValidity("");const formDataObj={};for(const[name,value]of formData.entries())mathsCaptcha.isCaptchaInputEl(name)||"string"==typeof value&&""!==value.trim()&&(formDataObj[name]=value);localStorage.setItem(`${formEl.id}-data`,JSON.stringify(formDataObj)),notifier.show(NotificationContent_submitErrorUnknown),notifier.show({...NotificationContent_msgPushedToStorage,hideOlder:!1})}return}return submitSuccessful=!0,notifier.show(NotificationContent_sumbitSuccess),localStorage.removeItem(`${formEl.id}-data`),void formControlElsWithoutButtons.forEach((el=>el.value=""))}catch(error){throw notifier.show(NotificationContent_submitErrorUnknown),error instanceof Error?error:new Error("Unknown error during form submission!")}finally{formFieldsets.forEach((el=>el.removeAttribute("disabled"))),formEl.querySelectorAll("input:not([type=button], [type=hidden], [type=reset], [type=submit]), textarea").forEach((el=>{updateFieldMessage(el),el.setAttribute("data-show-validation",submitSuccessful?"false":"true"),"true"===el.getAttribute("required")&&el.setAttribute("data-show-validation-border",el.validity.valid?"valid":"invalid")}))}}(formEl,mathsCaptcha,notifier).catch((error=>console.error(error)))})),formEl.querySelectorAll("fieldset:disabled").forEach((el=>el.removeAttribute("disabled"))),void formEl.classList.remove("has-overlay")}catch(error){throw error instanceof Error?error:new Error("Unknown error during form initialization!")}}!function(){document.documentElement.classList.replace("js-disabled","js-enabled"),document.body.addEventListener("mousedown",(()=>document.body.classList.add("using-mouse"))),document.body.addEventListener("keydown",(()=>document.body.classList.remove("using-mouse")));try{const typeItContainerEl=document.querySelector(".viktor-about--typeit > span");typeItContainerEl&&new TypeIt(typeItContainerEl,{speed:80,deleteSpeed:40,loop:!0}).type("Software devlo",{delay:500}).move(-2,{delay:350}).type("e",{delay:500}).move(2,{delay:400}).type("per",{delay:1850}).delete(void 0,{delay:900}).type("Photographer",{delay:1800}).delete(void 0,{delay:900}).type("Moti",{delay:400}).delete(2,{speed:120,delay:350}).type("toring enthusiast",{delay:2e3}).delete(void 0,{delay:900}).type("Human",{delay:1450}).delete(void 0,{delay:900}).go()}catch(error){console.error(error)}try{const contactFormEl=document.querySelector("#contact-form");contactFormEl&&initContactForm(contactFormEl)}catch(error){console.error(error)}}();